<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Arrrr!</title>
		<meta charset="utf-8">
		<style>
			body {
				margin: 0px;
				background-color: #f0f0f0;
				overflow: hidden;
			}
		</style>
	</head>
	<body onkeydown="keyDown(event)">

<!--		<script src="THREEjs/build/three.min.js"></script> -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r73/three.min.js"></script>

		<script>
			var clock = new THREE.Clock();
			var camera, scene, renderer;
			var mesh;
			//var enemyRange = THREE.Vector3(100,100,100);
			var enemies = [];
			var enemiesSpeed = 5;

			init();
			animate();

			function init() {

				camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
				camera.position.z = 400;

				scene = new THREE.Scene();
				

				var geometry = new THREE.BoxGeometry( 20, 20, 20 );
				//var material = new THREE.MeshBasicMaterial( { map: texture } );

				//var texture = THREE.TextureLoader( 'textures/crate.gif' );
				for ( var i = 0; i < geometry.faces.length; i += 2 ) {
					var hex = Math.random() * 0xffffff;
					geometry.faces[ i ].color.setHex( hex );
					geometry.faces[ i + 1 ].color.setHex( hex );
				}

				// define material for mesh
				var material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, overdraw: 0.5 } );

				// create mesh
				mesh = new THREE.Mesh( geometry, material );
				// add mesh to the scene
				scene.add( mesh );


				// instantiate a loader
/*				var loader = new THREE.JSONLoader();

				// load a resource
				loader.load(
					// resource URL
					'models/pirate-ship-fat-better.js',
					// Function when resource is loaded
					function ( geometry, materials ) {
						console.log("test");
						var material = new THREE.MeshFaceMaterial( materials );
						mesh = new THREE.Mesh( geometry, material );
						scene.add( mesh );
					}
				);			
*/
				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

				//

				window.addEventListener( 'resize', onWindowResize, false );

			}

			// FUNCTION for rotating object 
			function keyDown(event) {
				var key = event.which || event.keyCode;


				// nism prepričan če se bo to sploh rabl
				
//				var delta = clock.getDelta(); // seconds.
//				var moveDistance = 200 * delta; // 200 pixels per second
//				var rotateAngle = Math.PI / 2 * delta;   // pi/2 radians (90 degrees) per second


				switch(key){
					case 37: 
						console.log("left"); 
						mesh.rotateOnAxis( new THREE.Vector3(0,1,0), Math.PI/16);
						break; 	// left arrow
					case 39: 
						console.log("right");
						mesh.rotateOnAxis( new THREE.Vector3(0,1,0), -Math.PI/16);
						break; 	// right arrow
				  };
			}

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function animate() {
				requestAnimationFrame( animate );
/*			
				mesh.rotation.x += 0.005;
				mesh.rotation.y += 0.01;
*/
				
				renderer.render( scene, camera );

			}

		</script>

	</body>
</html>
